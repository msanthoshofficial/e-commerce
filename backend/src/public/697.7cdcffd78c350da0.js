"use strict";(self.webpackChunke_commerce=self.webpackChunke_commerce||[]).push([[697],{7697:(J,d,p)=>{p.r(d),p.d(d,{AdminComponent:()=>R});var r=p(6814),s=p(5096),c=p(707),m=p(5219),u=p(95),g=p(4104),_=p(3866),b=p(3714),t=p(4946),x=p(7749);function U(n,a){1&n&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Id"),t.qZA(),t.TgZ(3,"th",10),t._uU(4,"User Name "),t._UZ(5,"p-sortIcon",11),t.qZA(),t.TgZ(6,"th",12),t._uU(7,"Email "),t._UZ(8,"p-sortIcon",13),t.qZA(),t.TgZ(9,"th",14),t._uU(10,"Phone "),t._UZ(11,"p-sortIcon",15),t.qZA(),t.TgZ(12,"th",16),t._uU(13,"Role "),t._UZ(14,"p-sortIcon",17),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Edit"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Delete"),t.qZA()())}const Z=function(){return{width:"100%"}};function h(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"p-dropdown",25),t.NdJ("ngModelChange",function(i){t.CHM(e);const l=t.oxw().$implicit;return t.KtG(l.role=i)}),t.qZA()}if(2&n){const e=t.oxw().$implicit,o=t.oxw();t.Akn(t.DdM(4,Z)),t.Q6J("options",o.roles)("ngModel",e.role)}}function v(n,a){if(1&n&&t._uU(0),2&n){const e=t.oxw().$implicit;t.hij(" ",e.role," ")}}function T(n,a){1&n&&t._UZ(0,"button",26)}function C(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,l=t.oxw();return t.KtG(l.onRowEditSave(i._id,i.role))}),t.qZA()}}function y(n,a){1&n&&t._UZ(0,"button",28)}const A=function(){return{"margin-inline":"10px"}};function M(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr",18)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"p-cellEditor"),t.YNc(11,h,1,5,"ng-template",19),t.YNc(12,v,1,1,"ng-template",20),t.qZA()(),t.TgZ(13,"td")(14,"div"),t.YNc(15,T,1,0,"button",21),t.YNc(16,C,1,0,"button",22),t.YNc(17,y,1,0,"button",23),t.qZA()(),t.TgZ(18,"td")(19,"p-button",24),t.NdJ("onClick",function(){const l=t.CHM(e).$implicit,f=t.oxw();return t.KtG(f.deleteUser(l._id))}),t.qZA()()()}if(2&n){const e=a.$implicit,o=a.editing;t.Q6J("pEditableRow",e),t.xp6(2),t.Oqu(e._id),t.xp6(2),t.Oqu(e.username),t.xp6(2),t.Oqu(e.email),t.xp6(2),t.Oqu(e.phone),t.xp6(7),t.Q6J("ngIf",!o),t.xp6(1),t.Q6J("ngIf",o),t.xp6(1),t.Q6J("ngIf",o),t.xp6(2),t.Q6J("ngStyle",t.DdM(9,A))}}const w=function(){return["name","country.name","representative.name","status"]},S=function(){return{"min-width":"70rem"}};let E=(()=>{class n{constructor(e,o){this.dataService=e,this.messageService=o,this.users=[],this.roles=[{label:"customer",value:"customer"},{label:"seller",value:"seller"},{label:"admin",value:"admin"}]}ngOnInit(){this.getAllUsers()}getAllUsers(){this.dataService.getAllUsers().subscribe(e=>{this.users=e})}onRowEditSave(e,o){this.dataService.updateUserRole(e,o).subscribe(i=>{i&&this.messageService.add({severity:"success",summary:"Success",detail:"User role updated successfully"}),this.getAllUsers()})}deleteUser(e){this.dataService.deleteUser(e).subscribe(o=>{o&&this.messageService.add({severity:"success",summary:"Success",detail:"User deleted successfully"}),this.getAllUsers()})}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(x.D),t.Y36(m.ez))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-user-management"]],standalone:!0,features:[t._Bn([m.ez]),t.jDz],decls:14,vars:9,consts:[[2,"border-radius","20px","padding","20px","margin-block","15px","box-shadow","3px 1px 10px 7px rgb(223 223 223 / 50%)"],[2,"display","flex","justify-content","space-between","align-items","center"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",1,"p-inputtext-sm",3,"input"],["search",""],["styleClass","p-datatable-sm","dataKey","_id","editMode","row","dataKey","_id",3,"value","rows","paginator","globalFilterFields","tableStyle","breakpoint","rowHover"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","username",2,"min-width","15rem"],["field","username"],["pSortableColumn","email"],["field","email"],["pSortableColumn","phone"],["field","phone"],["pSortableColumn","role"],["field","role"],[3,"pEditableRow"],["pTemplate","input"],["pTemplate","output"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil","class","p-button-rounded p-button-text",4,"ngIf"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check","class","p-button-rounded p-button-text p-button-success mr-2",3,"click",4,"ngIf"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times","class","p-button-rounded p-button-text p-button-danger",4,"ngIf"],["type","button","styleClass","p-button-danger p-button p-button-rounded p-button-text p-button-raised","icon","pi pi-trash",3,"ngStyle","onClick"],["appendTo","body",3,"options","ngModel","ngModelChange"],["pButton","","pRipple","","type","button","pInitEditableRow","","icon","pi pi-pencil",1,"p-button-rounded","p-button-text"],["pButton","","pRipple","","type","button","pSaveEditableRow","","icon","pi pi-check",1,"p-button-rounded","p-button-text","p-button-success","mr-2",3,"click"],["pButton","","pRipple","","type","button","pCancelEditableRow","","icon","pi pi-times",1,"p-button-rounded","p-button-text","p-button-danger"]],template:function(o,i){if(1&o){const l=t.EpF();t._UZ(0,"p-toast"),t.TgZ(1,"div",0)(2,"div",1)(3,"h5"),t._uU(4,"Manage Users"),t.qZA(),t.TgZ(5,"div")(6,"div",2),t._UZ(7,"i",3),t.TgZ(8,"input",4,5),t.NdJ("input",function(){t.CHM(l);const I=t.MAs(9),q=t.MAs(11);return t.KtG(q.filterGlobal(I.value,"contains"))}),t.qZA()()()(),t.TgZ(10,"p-table",6,7),t.YNc(12,U,19,0,"ng-template",8),t.YNc(13,M,20,10,"ng-template",9),t.qZA()()}2&o&&(t.xp6(10),t.Q6J("value",i.users)("rows",6)("paginator",!0)("globalFilterFields",t.DdM(7,w))("tableStyle",t.DdM(8,S))("breakpoint","960px")("rowHover",!0))},dependencies:[r.ez,r.O5,r.PC,s.U$,s.iA,m.jx,s.lQ,s.YL,s.fz,s.D$,s.Pv,s.U1,s.wT,c.hJ,c.Hq,c.zx,_.kW,_.Lt,u.u5,u.JJ,u.On,u.UX,g.EV,g.FN,b.j,b.o],encapsulation:2})}return n})(),R=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin"]],standalone:!0,features:[t.jDz],decls:2,vars:0,consts:[[2,"display","flex","align-items","center","justify-content","center"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"app-user-management"),t.qZA())},dependencies:[r.ez,E],encapsulation:2})}return n})()}}]);